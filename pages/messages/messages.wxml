<navigation-bar title="信息" back="{{false}}" color="black" background="#f8fbff"></navigation-bar>

<scroll-view class="scrollarea" scroll-y enhanced enable-flex show-scrollbar="false">
  <view class="page">
    <view wx:if="{{!currentUser}}" class="card empty">
      <view>请先登录查看聊天信息</view>
      <button class="auth-btn" bindtap="goAuth">去登录</button>
    </view>

    <view wx:elif="{{sessions.length === 0}}" class="card empty">暂无会话，去搜索页申请借用后会出现在这里。</view>

    <view wx:for="{{sessions}}" wx:key="id" class="card session-card">
      <view class="session-header">
        <view class="session-title">{{item.itemTitle}}</view>
        <view class="session-head-right">
          <view class="session-status">{{item.status}}</view>
          <view wx:if="{{item.unreadCount > 0}}" class="session-unread">{{item.unreadText}}</view>
        </view>
      </view>
      <view class="session-role">我的身份：{{item.myRole}}</view>
      <view class="session-meta">出借者：{{item.lenderName}}</view>
      <view class="session-meta">借用者：{{item.borrowerName}}</view>
      <view class="session-meta">最近更新：{{item.updatedAtText}}</view>
      <button class="chat-btn" size="mini" data-id="{{item.id}}" bindtap="openChat">进入聊天与拍照对比</button>
    </view>
  </view>
</scroll-view>
